<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/src/output.css" rel="stylesheet" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Profile</title>
  </head>
  <body>
    <div class="navbar shadow-md bg-white">
      <div class="flex-1">
        <a href="/" class="font-bold pl-4 normal-case text-4xl text-amber-300"
          >TicketMax</a
        >
      </div>
      <div class="flex-none">
        <ul
          class="menu menu-horizontal px-1 text-2xl font-bold text-indigo-800"
        >
          <li><a href="/profile">PROFILE</a></li>
        </ul>
      </div>
    </div>
    <div class="flex flex-col w-6/12 m-auto mt-20">
      <div class="title text-3xl mb-8">會員資料</div>
      <div
        class="card bg-base-100 border rounded-md flex flex-col w-full m-auto font-sans"
      >
        <div class="profile ml-8 my-8">
          <div class="name-title text-xl text-slate-500" id="name-title">
            姓名
          </div>
          <div class="name text-2xl mt-2" id="name"></div>
          <div class="email-title mt-8 text-xl text-slate-500" id="email.title">
            信箱
          </div>
          <div class="email text-2xl mt-2" id="email"></div>
        </div>
      </div>
    </div>
  </body>
  <script>
    const name = document.getElementById("name");
    const email = document.getElementById("email");

    axios
      .get("/user/profile")
      .then((response) => {
        console.log(response);
        name.textContent = `${response.data.data.username}`;
        email.textContent = `${response.data.data.email}`;
      })
      .catch((error) => {
        if (error.response) {
          console.log(error.response.data.errors);
          window.location.assign("/user");
        } else if (error.request) {
          console.log("No response received");
        } else {
          console.log("Error:", error.message);
        }
      });
  </script>
</html>
